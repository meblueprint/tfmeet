(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,93631,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"warnOnce",{enumerable:!0,get:function(){return s}});let s=e=>{}},93348,e=>{"use strict";var t=e.i(15952),a=e.i(83326);function s({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,t.jsx)("table",{"data-slot":"table",className:(0,a.cn)("w-full caption-bottom text-sm",e),...s})})}function l({className:e,...s}){return(0,t.jsx)("thead",{"data-slot":"table-header",className:(0,a.cn)("[&_tr]:border-b",e),...s})}function r({className:e,...s}){return(0,t.jsx)("tbody",{"data-slot":"table-body",className:(0,a.cn)("[&_tr:last-child]:border-0",e),...s})}function n({className:e,...s}){return(0,t.jsx)("tr",{"data-slot":"table-row",className:(0,a.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...s})}function i({className:e,...s}){return(0,t.jsx)("th",{"data-slot":"table-head",className:(0,a.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...s})}function d({className:e,...s}){return(0,t.jsx)("td",{"data-slot":"table-cell",className:(0,a.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...s})}e.s(["Table",()=>s,"TableBody",()=>r,"TableCell",()=>d,"TableHead",()=>i,"TableHeader",()=>l,"TableRow",()=>n])},51682,86110,e=>{"use strict";var t=e.i(15952),a=e.i(81467),s=e.i(24645),l=e.i(74001);function r({children:e}){let{isAuthenticated:r}=(0,a.useAuth)();return((0,l.useRouter)(),r)?(0,t.jsxs)("div",{className:"flex min-h-screen",children:[(0,t.jsx)(s.Sidebar,{}),(0,t.jsx)("div",{className:"flex-1 overflow-auto",children:e})]}):null}e.s(["default",()=>r],51682);var n=e.i(80639),i=e.i(83549),d=e.i(83326);let c=(0,i.cva)("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function o({className:e,variant:a,asChild:s=!1,...l}){let r=s?n.Slot:"span";return(0,t.jsx)(r,{"data-slot":"badge",className:(0,d.cn)(c({variant:a}),e),...l})}e.s(["Badge",()=>o],86110)},51441,e=>{"use strict";let t=(0,e.i(82724).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);e.s(["TrendingUp",()=>t],51441)},37889,e=>{"use strict";let t=(0,e.i(82724).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);e.s(["Download",()=>t],37889)},83323,e=>{"use strict";var t=e.i(15952),a=e.i(8813),s=e.i(74001),l=e.i(81467),r=e.i(51682),n=e.i(68404),i=e.i(91782),d=e.i(93348),c=e.i(86110),o=e.i(10011),h=e.i(58786),x=e.i(41786),u=e.i(28825),m=e.i(37889),j=e.i(82724);let b=(0,j.default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var p=e.i(51441);let g=(0,j.default)("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);function v(){(0,s.useRouter)();let{user:e}=(0,l.useAuth)(),[j,v]=(0,a.useState)([]),[f,y]=(0,a.useState)([]),[w,N]=(0,a.useState)(!1);(0,a.useEffect)(()=>{T()},[]);let T=()=>{N(!0);let e=h.storage.getResults(),t=h.storage.getClasses(),a=h.storage.getEvents(),s=h.storage.getRegistrations(),l=t.map(t=>{let a=e.filter(e=>e.classId===t.id),s=a.reduce((e,t)=>e+t.points,0),l=a.filter(e=>1===e.rank).length,r=a.filter(e=>2===e.rank).length,n=a.filter(e=>3===e.rank).length;return{classId:t.id,className:t.name,totalPoints:s,goldMedals:l,silverMedals:r,bronzeMedals:n}});l.sort((e,t)=>t.totalPoints-e.totalPoints),v(l),y(a.map(t=>{let a=e.filter(e=>e.eventId===t.id),l=s.filter(e=>e.eventId===t.id&&"approved"===e.status),r=l.length>0?(a.length/l.length*100).toFixed(1):"0";return{eventId:t.id,eventName:t.name,eventCategory:t.category,totalParticipants:l.length,completedCount:a.length,participationRate:`${r}%`}})),N(!1)};return(0,t.jsx)(r.default,{children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("div",{className:"border-b bg-white p-6 mb-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"æ•°æ®ç»Ÿè®¡"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-1",children:"æŸ¥çœ‹è¿åŠ¨ä¼šç»Ÿè®¡æ•°æ®å’ŒæŠ¥è¡¨"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(n.Button,{variant:"outline",onClick:T,children:[(0,t.jsx)(b,{className:"h-4 w-4 mr-2"}),"åˆ·æ–°"]}),(0,t.jsxs)(n.Button,{variant:"outline",onClick:()=>{let t=new Blob([JSON.stringify(h.storage.exportAllData(),null,2)],{type:"application/json;charset=utf-8;"}),a=document.createElement("a");a.href=URL.createObjectURL(t),a.download=`è¿åŠ¨ä¼šæ•°æ®å¤‡ä»½_${new Date().toISOString().split("T")[0]}.json`,a.click(),URL.revokeObjectURL(a.href),h.storage.addLog({userId:e?.id||"",userName:e?.name||"",action:"å¯¼å‡º",target:"å®Œæ•´æ•°æ®å¤‡ä»½",details:"å¯¼å‡ºæ‰€æœ‰æ•°æ®å¤‡ä»½"}),o.toast.success("å¯¼å‡ºæˆåŠŸï¼")},children:[(0,t.jsx)(m.Download,{className:"h-4 w-4 mr-2"}),"å¯¼å‡ºå…¨éƒ¨æ•°æ®"]})]})]})}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(i.Card,{children:[(0,t.jsx)(i.CardHeader,{children:(0,t.jsxs)(i.CardTitle,{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.Trophy,{className:"h-5 w-5"}),"ç­çº§æ€»åˆ†æŽ’å"]}),(0,t.jsxs)(n.Button,{variant:"outline",size:"sm",onClick:()=>{let t=new Blob(["\uFEFF"+["æŽ’å,ç­çº§,æ€»åˆ†,é‡‘ç‰Œ,é“¶ç‰Œ,é“œç‰Œ",...j.map((e,t)=>[t+1,e.className,e.totalPoints,e.goldMedals,e.silverMedals,e.bronzeMedals]).map(e=>e.join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");a.href=URL.createObjectURL(t),a.download=`ç­çº§æ€»åˆ†æŽ’å_${new Date().toISOString().split("T")[0]}.csv`,a.click(),URL.revokeObjectURL(a.href),h.storage.addLog({userId:e?.id||"",userName:e?.name||"",action:"å¯¼å‡º",target:"ç­çº§æ€»åˆ†æŽ’å",details:"å¯¼å‡ºç­çº§æ€»åˆ†æŽ’åæ•°æ®"}),o.toast.success("å¯¼å‡ºæˆåŠŸï¼")},children:[(0,t.jsx)(m.Download,{className:"h-4 w-4 mr-2"}),"å¯¼å‡º"]})]})}),(0,t.jsx)(i.CardContent,{children:w?(0,t.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"åŠ è½½ä¸­..."}):(0,t.jsxs)(d.Table,{children:[(0,t.jsx)(d.TableHeader,{children:(0,t.jsxs)(d.TableRow,{children:[(0,t.jsx)(d.TableHead,{children:"æŽ’å"}),(0,t.jsx)(d.TableHead,{children:"ç­çº§"}),(0,t.jsx)(d.TableHead,{children:"æ€»åˆ†"}),(0,t.jsx)(d.TableHead,{children:"ðŸ¥‡ é‡‘ç‰Œ"}),(0,t.jsx)(d.TableHead,{children:"ðŸ¥ˆ é“¶ç‰Œ"}),(0,t.jsx)(d.TableHead,{children:"ðŸ¥‰ é“œç‰Œ"})]})}),(0,t.jsx)(d.TableBody,{children:0===j.length?(0,t.jsx)(d.TableRow,{children:(0,t.jsx)(d.TableCell,{colSpan:6,className:"text-center py-8",children:"æš‚æ— æ•°æ®"})}):j.map((e,a)=>(0,t.jsxs)(d.TableRow,{children:[(0,t.jsxs)(d.TableCell,{className:"font-medium",children:[0===a&&(0,t.jsx)(g,{className:"inline h-5 w-5 text-yellow-500 mr-1"}),1===a&&(0,t.jsx)(g,{className:"inline h-5 w-5 text-gray-400 mr-1"}),2===a&&(0,t.jsx)(g,{className:"inline h-5 w-5 text-orange-600 mr-1"}),a+1]}),(0,t.jsx)(d.TableCell,{className:"font-semibold",children:e.className}),(0,t.jsx)(d.TableCell,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(p.TrendingUp,{className:"h-4 w-4 text-primary"}),(0,t.jsx)("span",{className:"font-bold text-lg",children:e.totalPoints})]})}),(0,t.jsx)(d.TableCell,{children:(0,t.jsx)(c.Badge,{className:"bg-yellow-500",children:e.goldMedals})}),(0,t.jsx)(d.TableCell,{children:(0,t.jsx)(c.Badge,{className:"bg-gray-400",children:e.silverMedals})}),(0,t.jsx)(d.TableCell,{children:(0,t.jsx)(c.Badge,{className:"bg-orange-600",children:e.bronzeMedals})})]},e.classId))})]})})]}),(0,t.jsxs)(i.Card,{children:[(0,t.jsx)(i.CardHeader,{children:(0,t.jsxs)(i.CardTitle,{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(x.BarChart3,{className:"h-5 w-5"}),"é¡¹ç›®ç»Ÿè®¡"]}),(0,t.jsxs)(n.Button,{variant:"outline",size:"sm",onClick:()=>{let t=new Blob(["\uFEFF"+["é¡¹ç›®åç§°,ç±»åˆ«,æ€»æŠ¥åæ•°,å®Œæˆæ•°,å®ŒæˆçŽ‡",...f.map(e=>[e.eventName,e.eventCategory,e.totalParticipants,e.completedCount,e.participationRate]).map(e=>e.join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");a.href=URL.createObjectURL(t),a.download=`é¡¹ç›®ç»Ÿè®¡_${new Date().toISOString().split("T")[0]}.csv`,a.click(),URL.revokeObjectURL(a.href),h.storage.addLog({userId:e?.id||"",userName:e?.name||"",action:"å¯¼å‡º",target:"é¡¹ç›®ç»Ÿè®¡",details:"å¯¼å‡ºé¡¹ç›®ç»Ÿè®¡æ•°æ®"}),o.toast.success("å¯¼å‡ºæˆåŠŸï¼")},children:[(0,t.jsx)(m.Download,{className:"h-4 w-4 mr-2"}),"å¯¼å‡º"]})]})}),(0,t.jsx)(i.CardContent,{children:w?(0,t.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"åŠ è½½ä¸­..."}):(0,t.jsxs)(d.Table,{children:[(0,t.jsx)(d.TableHeader,{children:(0,t.jsxs)(d.TableRow,{children:[(0,t.jsx)(d.TableHead,{children:"é¡¹ç›®åç§°"}),(0,t.jsx)(d.TableHead,{children:"ç±»åˆ«"}),(0,t.jsx)(d.TableHead,{children:"æ€»æŠ¥åæ•°"}),(0,t.jsx)(d.TableHead,{children:"å®Œæˆæ•°"}),(0,t.jsx)(d.TableHead,{children:"å®ŒæˆçŽ‡"})]})}),(0,t.jsx)(d.TableBody,{children:0===f.length?(0,t.jsx)(d.TableRow,{children:(0,t.jsx)(d.TableCell,{colSpan:5,className:"text-center py-8",children:"æš‚æ— æ•°æ®"})}):f.map(e=>(0,t.jsxs)(d.TableRow,{children:[(0,t.jsx)(d.TableCell,{className:"font-medium",children:e.eventName}),(0,t.jsx)(d.TableCell,{children:e.eventCategory}),(0,t.jsx)(d.TableCell,{children:e.totalParticipants}),(0,t.jsx)(d.TableCell,{children:e.completedCount}),(0,t.jsx)(d.TableCell,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-primary h-2 rounded-full",style:{width:`${parseFloat(e.participationRate)}%`}})}),(0,t.jsx)("span",{className:"text-sm",children:e.participationRate})]})})]},e.eventId))})]})})]}),(0,t.jsxs)(i.Card,{children:[(0,t.jsx)(i.CardHeader,{children:(0,t.jsx)(i.CardTitle,{children:"ä½¿ç”¨è¯´æ˜Ž"})}),(0,t.jsxs)(i.CardContent,{className:"space-y-2 text-sm text-muted-foreground",children:[(0,t.jsxs)("p",{children:["â€¢ ",(0,t.jsx)("strong",{children:"ç­çº§æ€»åˆ†"}),"ï¼šæ ¹æ®æ‰€æœ‰é¡¹ç›®çš„æˆç»©è‡ªåŠ¨è®¡ç®—ï¼Œå‰ä¸‰ååˆ†åˆ«èŽ·å¾— 10/8/6 åˆ†ï¼Œç¬¬å››è‡³å…«åä¾æ¬¡èŽ·å¾— 5/4/3/2/1 åˆ†"]}),(0,t.jsxs)("p",{children:["â€¢ ",(0,t.jsx)("strong",{children:"å¥–ç‰Œç»Ÿè®¡"}),"ï¼šè‡ªåŠ¨ç»Ÿè®¡å„ç­çº§èŽ·å¾—çš„ç¬¬ä¸€ã€äºŒã€ä¸‰åæ•°é‡"]}),(0,t.jsxs)("p",{children:["â€¢ ",(0,t.jsx)("strong",{children:"é¡¹ç›®å®ŒæˆçŽ‡"}),"ï¼šæ˜¾ç¤ºå„é¡¹ç›®çš„æˆç»©å½•å…¥æƒ…å†µï¼Œå¸®åŠ©ç®¡ç†å‘˜æŽŒæ¡è¿›åº¦"]}),(0,t.jsxs)("p",{children:["â€¢ ",(0,t.jsx)("strong",{children:"æ•°æ®å¯¼å‡º"}),"ï¼šæ”¯æŒå¯¼å‡º CSV æ ¼å¼çš„ç»Ÿè®¡æ•°æ®å’Œ JSON æ ¼å¼çš„å®Œæ•´æ•°æ®å¤‡ä»½"]})]})]})]})]})})}e.s(["default",()=>v],83323)}]);